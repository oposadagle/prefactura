<x-header />
<style>
    .celdas {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        color: #656C82;
    }
</style>
<style>
    /* Cambiar el color de los botones de paginación */
    .dataTables_wrapper .dataTables_paginate .paginate_button {
        color: red !important;
        /* Cambia el color del texto */
    }

    /* Cambiar el color de fondo de los botones de paginación */
    .dataTables_wrapper .dataTables_paginate .paginate_button {
        background-color: transparent;
        /* Para evitar un fondo azul */
        border-color: red;
        /* Cambia el color del borde si lo deseas */
    }

    /* Cambiar el color cuando el botón está activo */
    .dataTables_wrapper .dataTables_paginate .paginate_button.current {
        background-color: red !important;
        /* Cambia el fondo del botón activo */
        color: white !important;
        /* Cambia el color del texto del botón activo */
    }

    /* Cambiar el color cuando el botón está en hover */
    .dataTables_wrapper .dataTables_paginate .paginate_button:hover {
        background-color: #ffcccc !important;
        /* Color de fondo en hover */
        color: red !important;
        /* Color del texto en hover */
    }
</style>

<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center m-2" style="background-color: #F4F5F7;">
        <div class="d-flex">
            <svg height="24px" width="24px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 392.598 392.598" xml:space="preserve"
                fill="#000000">
                <g id="SVGRepo_bgCarrier" stroke-width="0" />
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" />
                <g id="SVGRepo_iconCarrier">
                    <path style="fill:#FFFFFF;"
                        d="M359.855,260.331h-76.606l-18.554,26.764c-2.004,2.909-5.43,4.719-8.986,4.719h-118.82 c-3.556,0-6.982-1.745-8.986-4.719l-18.554-26.764H32.743c-6.012,0-10.925,4.848-10.925,10.925v88.63 c0,6.012,4.848,10.925,10.925,10.925h327.111c6.012,0,10.925-4.848,10.925-10.925v-88.695 C370.78,265.18,365.867,260.331,359.855,260.331z" />
                    <g>
                        <path style="fill:#5F6379;"
                            d="M71.919,21.851h248.824c6.012,0,10.925-4.848,10.925-10.925S326.82,0,320.743,0H71.919 c-6.012,0-10.925,4.848-10.925,10.925S65.842,21.851,71.919,21.851z" />
                        <path style="fill:#5F6379;"
                            d="M128.937,116.816c7.37,0,13.382,5.947,13.382,13.382c0,6.012,4.848,10.925,10.925,10.925 c6.077,0,10.925-4.848,10.925-10.925c0-15.515-10.214-28.832-24.242-33.358v-5.56c0-6.012-4.848-10.925-10.925-10.925 c-6.012,0-10.925,4.848-10.925,10.925v5.56c-14.093,4.655-24.242,17.842-24.242,33.358c0,19.394,15.774,35.168,35.168,35.168h0.065 c6.723,0.711,13.317,6.271,13.317,13.188c0,7.37-5.947,13.382-13.382,13.382c-7.37,0-13.382-5.947-13.382-13.382 c0-6.012-4.848-10.925-10.925-10.925c-6.077,0-10.925,4.848-10.925,10.925c0,15.515,10.214,28.832,24.242,33.358v5.56 c0,6.012,4.848,10.925,10.925,10.925c6.012,0,10.925-4.848,10.925-10.925v-5.56c14.093-4.655,24.242-17.842,24.242-33.358 c0-19.394-17.067-35.103-36.461-35.103h-0.065c-6.723-0.711-11.96-6.335-11.96-13.317 C115.556,122.828,121.503,116.816,128.937,116.816z" />
                        <path style="fill:#5F6379;"
                            d="M203.281,123.604h84.687c6.012,0,10.925-4.848,10.925-10.925s-4.848-10.925-10.925-10.925h-84.687 c-6.012,0-10.925,4.848-10.925,10.925S197.204,123.604,203.281,123.604z" />
                        <path style="fill:#5F6379;"
                            d="M287.968,146.877h-84.687c-6.012,0-10.925,4.848-10.925,10.925s4.848,10.925,10.925,10.925h84.687 c6.012,0,10.925-4.848,10.925-10.925S293.98,146.877,287.968,146.877z" />
                        <path style="fill:#5F6379;"
                            d="M287.968,191.935h-84.687c-6.012,0-10.925,4.848-10.925,10.925c0,6.012,4.848,10.925,10.925,10.925 h84.687c6.012,0,10.925-4.848,10.925-10.925C298.828,196.784,293.98,191.935,287.968,191.935z" />
                    </g>
                    <path style="fill:#FFFFFF;"
                        d="M124.024,243.135l18.554,26.764h107.313l18.554-26.764c2.004-2.909,5.43-4.719,8.986-4.719h60.251 V70.271H54.917v168.145h60.186C118.659,238.545,122.02,240.226,124.024,243.135z M203.281,101.818h84.687 c6.012,0,10.925,4.848,10.925,10.925c0,6.012-4.848,10.925-10.925,10.925h-84.687c-6.012,0-10.925-4.848-10.925-10.925 C192.356,106.667,197.204,101.818,203.281,101.818z M203.281,146.877h84.687c6.012,0,10.925,4.848,10.925,10.925 c0,6.012-4.848,10.925-10.925,10.925h-84.687c-6.012,0-10.925-4.848-10.925-10.925S197.204,146.877,203.281,146.877z M203.281,191.935h84.687c6.012,0,10.925,4.848,10.925,10.925s-4.848,10.925-10.925,10.925h-84.687 c-6.012,0-10.925-4.848-10.925-10.925S197.204,191.935,203.281,191.935z M93.77,178.618c0-6.012,4.848-10.925,10.925-10.925 c6.077,0,10.925,4.848,10.925,10.925c0,7.37,5.947,13.382,13.382,13.382c7.37,0,13.382-5.947,13.382-13.382 c0-6.853-6.594-12.541-13.317-13.188c-0.065,0-0.323,0-0.065,0c-19.394,0-35.168-15.774-35.168-35.168 c0-15.515,10.214-28.832,24.242-33.358v-5.56c0-6.012,4.848-10.925,10.925-10.925s10.925,4.848,10.925,10.925v5.56 c14.093,4.655,24.242,17.842,24.242,33.358c0,6.012-4.848,10.925-10.925,10.925c-6.077,0-10.925-4.848-10.925-10.925 c0-7.37-5.947-13.382-13.382-13.382c-7.37,0-13.382,5.947-13.382,13.382c0,6.853,5.236,12.606,11.96,13.317c0.065,0,0.323,0,0.065,0 c19.394,0,36.461,15.709,36.461,35.103c0,15.515-10.214,28.832-24.242,33.358v5.56c0,6.012-4.848,10.925-10.925,10.925 c-6.077,0-10.925-4.848-10.925-10.925v-5.56C103.984,207.386,93.77,194.198,93.77,178.618z" />
                    <path style="fill:#5F6379;"
                        d="M359.855,238.545h-0.388V59.41c0-6.012-4.848-10.925-10.925-10.925H43.992 c-6.012,0-10.925,4.848-10.925,10.925v179.135h-0.323c-18.036,0-32.711,14.675-32.711,32.711v88.63 c0,18.036,14.675,32.711,32.711,32.711h327.111c18.036,0,32.711-14.675,32.711-32.711v-88.695 C392.566,253.22,377.891,238.545,359.855,238.545z M54.917,70.271h282.828v168.145H277.56c-3.556,0-6.982,1.745-8.986,4.719 l-18.554,26.764H142.578l-18.554-26.764c-2.004-2.909-5.43-4.719-8.986-4.719H54.917V70.271z M370.78,359.887 c0,6.012-4.848,10.925-10.925,10.925H32.743c-6.012,0-10.925-4.848-10.925-10.925v-88.695c0-6.012,4.848-10.925,10.925-10.925 h76.671l18.554,26.764c2.004,2.909,5.43,4.719,8.986,4.719h118.756c3.556,0,6.853-1.745,8.986-4.719l18.554-26.764h76.671 c6.012,0,10.925,4.848,10.925,10.925v88.695H370.78z" />
                    <path style="fill:#FE252D;"
                        d="M359.855,260.331h-76.606l-18.554,26.764c-2.004,2.909-5.43,4.719-8.986,4.719h-118.82 c-3.556,0-6.982-1.745-8.986-4.719l-18.554-26.764H32.743c-6.012,0-10.925,4.848-10.925,10.925v14.933h45.576 c5.947,0,10.796,4.848,10.796,10.796l0,0c0,5.947-4.848,10.796-10.796,10.796H21.818v19.329h22.174 c6.012,0,10.925,4.848,10.925,10.925c0,6.012-4.848,10.925-10.925,10.925H21.818v10.925c0,6.012,4.848,10.925,10.925,10.925h327.111 c6.012,0,10.925-4.848,10.925-10.925v-88.695C370.78,265.18,365.867,260.331,359.855,260.331z" />
                </g>
            </svg>
            <h4 class="card-title" style="margin-left: 10px;">FACTURACION CLIENTES</h4>
        </div>
        <div class="d-flex justify-content-end">
            <div class="col-lg-3 px-1">
                <form action="{{ route('procesar.guias') }}" method="post" enctype="multipart/form-data"
                    id="facturaForm">
                    @csrf
                    <label class="form-label mb-lg-0 text-end">Facturas</label>
                    <div class="input-group">
                        <input type="file" class="form-control" id="inputGroupFile04" name="archivo"
                            aria-describedby="inputGroupFileAddon04" aria-label="Upload">
                        <button class="btn btn-outline-primary"
                            style="font-size: 12px;font-family: Titillium Web;font-weight: 700;" type="submit"
                            id="inputGroupFileAddon04">CARGAR</button>
                    </div>
                </form>
            </div>
            <div class="col-lg-3 px-1">
                <form action="{{ route('procesar.siigo') }}" method="post" enctype="multipart/form-data"
                    id="SiigoForm">
                    @csrf
                    <label class="form-label mb-lg-0 text-end">Valores Siigo</label>
                    <div class="input-group">
                        <input type="file" class="form-control" id="inputGroupFile04" name="documento"
                            aria-describedby="inputGroupFileAddon04" aria-label="Upload">
                        <button class="btn btn-outline-primary"
                            style="font-size: 12px;font-family: Titillium Web;font-weight: 700;" type="submit"
                            id="inputGroupFileAddon04">CARGAR</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="d-flex">
    <div class="col-lg-8">
        <div class="card">
            <div class="card-header">
                <div class="d-flex justify-content-between">
                    <div class="d-flex">
                        <button id="clearFilters" class="btn btn-sm btn-soft-danger py-0 me-2">
                            <i class="fas fa-eraser me-2"></i>limpiar filtros
                        </button>
                        </h4>
                        <div class="d-flex">
                            <div class="form-floating me-2">
                                <select id="year" name="year" class="form-select" style="width: 73px;">
                                    @foreach ($years as $y)
                                        <option value="{{ $y }}" {{ $year == $y ? 'selected' : '' }}>
                                            {{ $y }}
                                        </option>
                                    @endforeach
                                </select>
                                <label for="floatingSelect">Año</label>
                            </div>
                            <div class="form-floating me-2">
                                <select id="month" name="month" class="form-select" style="width: 65px;">
                                    @foreach ($months as $m)
                                        <option value="{{ $m }}" {{ $month == $m ? 'selected' : '' }}>
                                            {{ $m }}
                                        </option>
                                    @endforeach
                                </select>
                                <label for="floatingSelect">Mes</label>
                            </div>
                            <div class="form-floating me-2">
                                <select id="operador" name="operador" class="form-select" style="width: 85px;">
                                    <option value="">Todos</option>
                                    @foreach ($operadores as $op)
                                        <option value="{{ $op }}" {{ $operador == $op ? 'selected' : '' }}>
                                            {{ $op }}
                                        </option>
                                    @endforeach
                                </select>
                                <label for="floatingSelect">Operador</label>
                            </div>
                            <div class="form-floating me-2">
                                <select id="factura" name="factura" class="form-select" style="width: 85px;">
                                    <option value="">Todos</option>
                                    <option value="si" {{ $facturaFiltro === 'si' ? 'selected' : '' }}>Si</option>
                                    <option value="no" {{ $facturaFiltro === 'no' ? 'selected' : '' }}>No</option>
                                </select>
                                <label for="floatingSelect">Factura</label>
                            </div>
                            <div class="form-floating me-2">
                                <select id="cliente" name="cliente[]" class="form-select" multiple
                                    style="width: 320px;">
                                    @foreach ($clientes as $cl)
                                        <option value="{{ $cl }}"
                                            {{ in_array($cl, $clientesSeleccionados ?? []) ? 'selected' : '' }}>
                                            {{ $cl }}
                                        </option>
                                    @endforeach
                                </select>
                                <label for="floatingSelect">Cliente</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="input-group mb-3 d-flex justify-content-between">
                    <button class="btn btn-secondary" type="button" id="button-addon1"><i
                            class="fas fa-search"></i></button>
                    <input type="text" id="searchGuia" class="form-control me-2" placeholder="Buscar guía...">
                    <button id="exportExcel" class="btn btn-secondary">
                        <svg class="me-2" width="18px" height="18px" viewBox="0 0 32 32"
                            xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                            fill="#000000">
                            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                            <g id="SVGRepo_iconCarrier">
                                <defs>
                                    <linearGradient id="a" x1="4.494" y1="-2092.086" x2="13.832"
                                        y2="-2075.914" gradientTransform="translate(0 2100)"
                                        gradientUnits="userSpaceOnUse">
                                        <stop offset="0" stop-color="#18884f"></stop>
                                        <stop offset="0.5" stop-color="#117e43"></stop>
                                        <stop offset="1" stop-color="#0b6631"></stop>
                                    </linearGradient>
                                </defs>
                                <title>file_type_excel</title>
                                <path
                                    d="M19.581,15.35,8.512,13.4V27.809A1.192,1.192,0,0,0,9.705,29h19.1A1.192,1.192,0,0,0,30,27.809h0V22.5Z"
                                    style="fill:#185c37"></path>
                                <path
                                    d="M19.581,3H9.705A1.192,1.192,0,0,0,8.512,4.191h0V9.5L19.581,16l5.861,1.95L30,16V9.5Z"
                                    style="fill:#21a366"></path>
                                <path d="M8.512,9.5H19.581V16H8.512Z" style="fill:#107c41"></path>
                                <path
                                    d="M16.434,8.2H8.512V24.45h7.922a1.2,1.2,0,0,0,1.194-1.191V9.391A1.2,1.2,0,0,0,16.434,8.2Z"
                                    style="opacity:0.10000000149011612;isolation:isolate"></path>
                                <path
                                    d="M15.783,8.85H8.512V25.1h7.271a1.2,1.2,0,0,0,1.194-1.191V10.041A1.2,1.2,0,0,0,15.783,8.85Z"
                                    style="opacity:0.20000000298023224;isolation:isolate"></path>
                                <path
                                    d="M15.783,8.85H8.512V23.8h7.271a1.2,1.2,0,0,0,1.194-1.191V10.041A1.2,1.2,0,0,0,15.783,8.85Z"
                                    style="opacity:0.20000000298023224;isolation:isolate"></path>
                                <path
                                    d="M15.132,8.85H8.512V23.8h6.62a1.2,1.2,0,0,0,1.194-1.191V10.041A1.2,1.2,0,0,0,15.132,8.85Z"
                                    style="opacity:0.20000000298023224;isolation:isolate"></path>
                                <path
                                    d="M3.194,8.85H15.132a1.193,1.193,0,0,1,1.194,1.191V21.959a1.193,1.193,0,0,1-1.194,1.191H3.194A1.192,1.192,0,0,1,2,21.959V10.041A1.192,1.192,0,0,1,3.194,8.85Z"
                                    style="fill:url(#a)"></path>
                                <path
                                    d="M5.7,19.873l2.511-3.884-2.3-3.862H7.758L9.013,14.6c.116.234.2.408.238.524h.017c.082-.188.169-.369.26-.546l1.342-2.447h1.7l-2.359,3.84,2.419,3.905H10.821l-1.45-2.711A2.355,2.355,0,0,1,9.2,16.8H9.176a1.688,1.688,0,0,1-.168.351L7.515,19.873Z"
                                    style="fill:#fff"></path>
                                <path d="M28.806,3H19.581V9.5H30V4.191A1.192,1.192,0,0,0,28.806,3Z"
                                    style="fill:#33c481"></path>
                                <path d="M19.581,16H30v6.5H19.581Z" style="fill:#107c41"></path>
                            </g>
                        </svg>
                        Descargar Excel
                    </button>
                </div>
                <div id="table-container">
                    @include('partials.gle-table', ['locales' => $locales])
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-4">
        <div class="sidebar">
            <ul class="list-group" style="list-style: none; padding: 0;">
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <span><strong><svg class="me-1" width="20px" height="20px" viewBox="0 -1 26 26"
                                fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier">
                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                        d="M12.31 16.826C12.2864 17.9963 11.3464 18.9278 10.2052 18.9118C9.06401 18.8957 8.14927 17.9382 8.15697 16.7676C8.16467 15.5971 9.09191 14.6522 10.2332 14.652C10.7897 14.6578 11.3212 14.8901 11.7106 15.2978C12.1001 15.7055 12.3157 16.2552 12.31 16.826V16.826Z"
                                        stroke="#007F73" stroke-width="1.5" stroke-linecap="round"
                                        stroke-linejoin="round"></path>
                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                        d="M22.2014 16.826C22.1778 17.9963 21.2378 18.9278 20.0966 18.9118C18.9554 18.8957 18.0407 17.9382 18.0484 16.7676C18.0561 15.5971 18.9833 14.6522 20.1246 14.652C20.6811 14.6578 21.2126 14.8901 21.602 15.2978C21.9915 15.7055 22.2071 16.2552 22.2014 16.826V16.826Z"
                                        stroke="#007F73" stroke-width="1.5" stroke-linecap="round"
                                        stroke-linejoin="round"></path>
                                    <path
                                        d="M17.8032 17.576C18.2174 17.576 18.5532 17.2402 18.5532 16.826C18.5532 16.4118 18.2174 16.076 17.8032 16.076V17.576ZM12.31 16.076C11.8958 16.076 11.56 16.4118 11.56 16.826C11.56 17.2402 11.8958 17.576 12.31 17.576V16.076ZM17.0571 16.826C17.0571 17.2402 17.3928 17.576 17.8071 17.576C18.2213 17.576 18.5571 17.2402 18.5571 16.826H17.0571ZM18.5571 11.559C18.5571 11.1448 18.2213 10.809 17.8071 10.809C17.3928 10.809 17.0571 11.1448 17.0571 11.559H18.5571ZM17.8071 16.076C17.3928 16.076 17.0571 16.4118 17.0571 16.826C17.0571 17.2402 17.3928 17.576 17.8071 17.576V16.076ZM18.0518 17.576C18.466 17.576 18.8018 17.2402 18.8018 16.826C18.8018 16.4118 18.466 16.076 18.0518 16.076V17.576ZM22.189 16.0762C21.7749 16.0852 21.4465 16.4281 21.4555 16.8423C21.4644 17.2564 21.8074 17.5848 22.2215 17.5758L22.189 16.0762ZM24.4 14.485L25.1499 14.4718C25.1492 14.4331 25.1455 14.3946 25.1389 14.3565L24.4 14.485ZM24.63 11.4305C24.559 11.0224 24.1706 10.7491 23.7625 10.8201C23.3544 10.8911 23.0812 11.2794 23.1521 11.6875L24.63 11.4305ZM17.8031 6.127C17.3889 6.127 17.0531 6.46279 17.0531 6.877C17.0531 7.29121 17.3889 7.627 17.8031 7.627V6.127ZM21.2849 6.877L21.2849 7.62702L21.2897 7.62698L21.2849 6.877ZM22.8737 7.56387L22.327 8.07731L22.327 8.07731L22.8737 7.56387ZM23.4835 9.218L22.7342 9.18603C22.7319 9.23979 22.7354 9.29363 22.7446 9.34663L23.4835 9.218ZM23.1522 11.6876C23.2232 12.0957 23.6116 12.3689 24.0197 12.2979C24.4278 12.2268 24.701 11.8384 24.6299 11.4304L23.1522 11.6876ZM18.5531 6.877C18.5531 6.46279 18.2174 6.127 17.8031 6.127C17.3889 6.127 17.0531 6.46279 17.0531 6.877H18.5531ZM17.0531 11.559C17.0531 11.9732 17.3889 12.309 17.8031 12.309C18.2174 12.309 18.5531 11.9732 18.5531 11.559H17.0531ZM17.0531 6.877C17.0531 7.29121 17.3889 7.627 17.8031 7.627C18.2174 7.627 18.5531 7.29121 18.5531 6.877H17.0531ZM17.8031 6.077L17.0531 6.0722V6.077H17.8031ZM16.7657 5L16.77 4.25H16.7657V5ZM7.42037 5L7.42037 4.24999L7.41679 4.25001L7.42037 5ZM6.68411 5.31693L6.14467 4.79587L6.14467 4.79587L6.68411 5.31693ZM6.382 6.075L7.13201 6.075L7.13199 6.07158L6.382 6.075ZM6.382 15.75L7.132 15.7534V15.75H6.382ZM6.68411 16.5081L6.14467 17.0291L6.14467 17.0291L6.68411 16.5081ZM7.42037 16.825L7.41679 17.575H7.42037V16.825ZM8.1526 17.575C8.56681 17.575 8.9026 17.2392 8.9026 16.825C8.9026 16.4108 8.56681 16.075 8.1526 16.075V17.575ZM17.8051 10.808C17.3909 10.808 17.0551 11.1438 17.0551 11.558C17.0551 11.9722 17.3909 12.308 17.8051 12.308V10.808ZM23.893 12.308C24.3072 12.308 24.643 11.9722 24.643 11.558C24.643 11.1438 24.3072 10.808 23.893 10.808V12.308ZM1 6.25C0.585786 6.25 0.25 6.58579 0.25 7C0.25 7.41421 0.585786 7.75 1 7.75V6.25ZM4.05175 7.75C4.46596 7.75 4.80175 7.41421 4.80175 7C4.80175 6.58579 4.46596 6.25 4.05175 6.25V7.75ZM1.975 9.25C1.56079 9.25 1.225 9.58579 1.225 10C1.225 10.4142 1.56079 10.75 1.975 10.75V9.25ZM3.925 10.75C4.33921 10.75 4.675 10.4142 4.675 10C4.675 9.58579 4.33921 9.25 3.925 9.25V10.75ZM2.56975 12.25C2.15554 12.25 1.81975 12.5858 1.81975 13C1.81975 13.4142 2.15554 13.75 2.56975 13.75V12.25ZM3.925 13.75C4.33921 13.75 4.675 13.4142 4.675 13C4.675 12.5858 4.33921 12.25 3.925 12.25V13.75ZM17.8032 16.076H12.31V17.576H17.8032V16.076ZM18.5571 16.826V11.559H17.0571V16.826H18.5571ZM17.8071 17.576H18.0518V16.076H17.8071V17.576ZM22.2215 17.5758C23.8876 17.5397 25.1791 16.1341 25.1499 14.4718L23.6501 14.4982C23.6655 15.3704 22.9939 16.0587 22.189 16.0762L22.2215 17.5758ZM25.1389 14.3565L24.63 11.4305L23.1521 11.6875L23.6611 14.6135L25.1389 14.3565ZM17.8031 7.627H21.2849V6.127H17.8031V7.627ZM21.2897 7.62698C21.6768 7.62448 22.0522 7.7847 22.327 8.07731L23.4204 7.05042C22.8641 6.4581 22.0909 6.12177 21.28 6.12702L21.2897 7.62698ZM22.327 8.07731C22.6025 8.37065 22.7519 8.7712 22.7342 9.18603L24.2328 9.24997C24.2675 8.43728 23.976 7.642 23.4204 7.05042L22.327 8.07731ZM22.7446 9.34663L23.1522 11.6876L24.6299 11.4304L24.2224 9.08937L22.7446 9.34663ZM17.0531 6.877V11.559H18.5531V6.877H17.0531ZM18.5531 6.877V6.077H17.0531V6.877H18.5531ZM18.5531 6.0818C18.5562 5.60485 18.3745 5.14259 18.0422 4.79768L16.9619 5.83829C17.0188 5.8974 17.0537 5.98123 17.0532 6.0722L18.5531 6.0818ZM18.0422 4.79768C17.7094 4.45212 17.2522 4.25277 16.77 4.25001L16.7615 5.74999C16.8331 5.7504 16.9056 5.77984 16.9619 5.83829L18.0422 4.79768ZM16.7657 4.25H7.42037V5.75H16.7657V4.25ZM7.41679 4.25001C6.93498 4.25231 6.4778 4.45098 6.14467 4.79587L7.22355 5.83799C7.27989 5.77967 7.3524 5.75033 7.42396 5.74999L7.41679 4.25001ZM6.14467 4.79587C5.81216 5.1401 5.62983 5.60177 5.63201 6.07843L7.13199 6.07158C7.13158 5.98066 7.16659 5.89696 7.22355 5.83799L6.14467 4.79587ZM5.632 6.075V15.75H7.132V6.075H5.632ZM5.63201 15.7466C5.62983 16.2232 5.81216 16.6849 6.14467 17.0291L7.22355 15.987C7.16659 15.928 7.13158 15.8443 7.13199 15.7534L5.63201 15.7466ZM6.14467 17.0291C6.4778 17.374 6.93498 17.5727 7.41679 17.575L7.42396 16.075C7.3524 16.0747 7.27988 16.0453 7.22355 15.987L6.14467 17.0291ZM7.42037 17.575H8.1526V16.075H7.42037V17.575ZM17.8051 12.308H23.893V10.808H17.8051V12.308ZM1 7.75H4.05175V6.25H1V7.75ZM1.975 10.75H3.925V9.25H1.975V10.75ZM2.56975 13.75H3.925V12.25H2.56975V13.75Z"
                                        fill="#007F73"></path>
                                </g>
                            </svg>Operador:</strong></span>
                    <span style="text-align: right;">{{ $operador ?? 'Todos' }}</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <span><strong><svg class="me-1" width="20px" height="20px" viewBox="0 0 24 24"
                                fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier">
                                    <path
                                        d="M8 13H16C17.7107 13 19.1506 14.2804 19.3505 15.9795L20 21.5M8 13C5.2421 12.3871 3.06717 10.2687 2.38197 7.52787L2 6M8 13V18C8 19.8856 8 20.8284 8.58579 21.4142C9.17157 22 10.1144 22 12 22C13.8856 22 14.8284 22 15.4142 21.4142C16 20.8284 16 19.8856 16 18V17"
                                        stroke="#FF8F00" stroke-width="1.5" stroke-linecap="round"></path>
                                    <circle cx="12" cy="6" r="4" stroke="#FF8F00" stroke-width="1.5">
                                    </circle>
                                </g>
                            </svg>Cliente:</strong></span>
                    <span
                        style="text-align: right;">{{ $clientesSeleccionados ? implode(', ', $clientesSeleccionados) : 'Todos' }}</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <span><strong><svg class="me-1" height="20px" width="20px" version="1.1" id="Layer_1"
                                xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                viewBox="0 0 512 512" xml:space="preserve" fill="#000000">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier">
                                    <g>
                                        <path style="fill:#00D7DF;"
                                            d="M41.253,151.36c6.99,0,12.466-5.068,12.466-11.538V49.123c0-6.394-5.243-11.402-11.935-11.402 c-5.888,0-8.833,3.951-9.801,5.249c-0.04,0.055-0.081,0.11-0.119,0.165L21.327,58.042c-2.047,2.225-3.865,5.783-3.865,9.197 c0,6.505,5.059,11.812,11.321,11.933v60.65C28.782,146.4,34.142,151.36,41.253,151.36z">
                                        </path>
                                        <path style="fill:#00D7DF;"
                                            d="M25.557,254.952c-11.929,8.591-25.449,18.33-25.449,33.39v12.934 c0,6.904,6.313,11.541,12.211,11.541h47.479c6.215,0,11.271-5.475,11.271-12.205c0-6.659-5.057-12.076-11.271-12.076H25.323v-0.197 c0-3.626,8.312-9.491,14.991-14.204c13.286-9.376,29.821-21.043,29.821-41.277c0-19.202-14.882-33.68-34.614-33.68 c-18.894,0-33.143,12.988-33.143,30.211c0,9.994,6.505,13.542,12.075,13.542c7.973,0,12.737-5.935,12.737-11.673 c0-3.568,0.915-7.663,8.063-7.663c9.654,0,9.931,8.554,9.931,9.529C45.186,240.813,35.208,248.001,25.557,254.952z">
                                        </path>
                                        <path style="fill:#00D7DF;"
                                            d="M35.326,450.064c-9.822,0-10.585-5.058-10.585-6.608c0-5.863-3.886-11.777-12.57-11.777 C4.55,431.678,0,436.428,0,444.384c0,14.493,12.424,29.896,35.453,29.896c22.368,0,35.724-13.451,35.724-35.983v-2.516 c0-9.239-2.955-16.897-8.501-22.404c3.799-5.498,5.856-12.828,5.856-21.382c0-19.927-11.765-31.355-32.282-31.355 c-26.897,0-34.006,19.21-34.006,29.368c0,11.825,8.791,13.102,12.571,13.102c7.361,0,12.305-4.945,12.305-12.306 c0-2.83,1.008-6.081,8.859-6.081c5.643,0,7.941,0.812,7.941,8.99c0,7.989-1.715,8.859-8.469,8.859 c-6.487,0-11.378,5.118-11.378,11.908c0,6.715,4.95,11.778,11.514,11.778c8.919,0,10.713,3.643,10.713,9.521v2.516 C46.302,448.188,42.444,450.064,35.326,450.064z">
                                        </path>
                                    </g>
                                    <g>
                                        <path style="fill:#424EDE;"
                                            d="M164.864,86.468h322.917C501.156,86.468,512,75.625,512,62.25s-10.844-24.219-24.219-24.219H164.864 c-13.375,0-24.219,10.844-24.219,24.219S151.489,86.468,164.864,86.468z">
                                        </path>
                                        <path style="fill:#424EDE;"
                                            d="M164.864,183.344h322.917c13.375,0,24.219-10.844,24.219-24.219s-10.844-24.219-24.219-24.219 H164.864c-13.375,0-24.219,10.844-24.219,24.219S151.489,183.344,164.864,183.344z">
                                        </path>
                                        <path style="fill:#424EDE;"
                                            d="M164.864,280.219h322.917C501.156,280.219,512,269.375,512,256 c0-13.375-10.844-24.219-24.219-24.219H164.864c-13.375,0-24.219,10.844-24.219,24.219 C140.645,269.375,151.489,280.219,164.864,280.219z">
                                        </path>
                                        <path style="fill:#424EDE;"
                                            d="M164.864,473.969h322.917c13.375,0,24.219-10.844,24.219-24.219 c0-13.375-10.844-24.219-24.219-24.219H164.864c-13.375,0-24.219,10.844-24.219,24.219 C140.645,463.126,151.489,473.969,164.864,473.969z">
                                        </path>
                                        <path style="fill:#424EDE;"
                                            d="M164.864,377.094h322.917c13.375,0,24.219-10.844,24.219-24.219 c0-13.375-10.844-24.219-24.219-24.219H164.864c-13.375,0-24.219,10.844-24.219,24.219 C140.645,366.25,151.489,377.094,164.864,377.094z">
                                        </path>
                                    </g>
                                </g>
                            </svg>Cantidad de guías:</strong></span>
                    <span
                        style="text-align: right;font-size:17px;">{{ number_format($cantidadGuias, 0, ',', '.') }}</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <span><strong><svg class="me-1" width="20px" height="20px" viewBox="-0.5 0 25 25"
                                fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier">
                                    <path
                                        d="M12.8702 16.97V18.0701C12.8702 18.2478 12.7995 18.4181 12.6739 18.5437C12.5482 18.6694 12.3778 18.74 12.2001 18.74C12.0224 18.74 11.852 18.6694 11.7264 18.5437C11.6007 18.4181 11.5302 18.2478 11.5302 18.0701V16.9399C11.0867 16.8668 10.6625 16.7051 10.2828 16.4646C9.90316 16.2241 9.57575 15.9097 9.32013 15.54C9.21763 15.428 9.16061 15.2817 9.16016 15.1299C9.16006 15.0433 9.17753 14.9576 9.21155 14.8779C9.24557 14.7983 9.29545 14.7263 9.35809 14.6665C9.42074 14.6067 9.49484 14.5601 9.57599 14.5298C9.65713 14.4994 9.7436 14.4859 9.83014 14.49C9.91602 14.4895 10.0009 14.5081 10.0787 14.5444C10.1566 14.5807 10.2254 14.6338 10.2802 14.7C10.6 15.1178 11.0342 15.4338 11.5302 15.6099V13.0701C10.2002 12.5401 9.53015 11.77 9.53015 10.76C9.55019 10.2193 9.7627 9.70353 10.1294 9.30566C10.4961 8.9078 10.9929 8.65407 11.5302 8.59009V7.47998C11.5302 7.30229 11.6007 7.13175 11.7264 7.0061C11.852 6.88045 12.0224 6.81006 12.2001 6.81006C12.3778 6.81006 12.5482 6.88045 12.6739 7.0061C12.7995 7.13175 12.8702 7.30229 12.8702 7.47998V8.58008C13.2439 8.63767 13.6021 8.76992 13.9234 8.96924C14.2447 9.16856 14.5226 9.43077 14.7402 9.73999C14.8284 9.85568 14.8805 9.99471 14.8901 10.1399C14.8928 10.2256 14.8783 10.3111 14.8473 10.3911C14.8163 10.4711 14.7696 10.5439 14.7099 10.6055C14.6502 10.667 14.5787 10.7161 14.4998 10.7495C14.4208 10.7829 14.3359 10.8001 14.2501 10.8C14.1607 10.7989 14.0725 10.7787 13.9915 10.7407C13.9104 10.7028 13.8384 10.648 13.7802 10.5801C13.5417 10.2822 13.2274 10.054 12.8702 9.91992V12.1699L13.1202 12.27C14.3902 12.76 15.1802 13.4799 15.1802 14.6299C15.163 15.2399 14.9149 15.8208 14.4862 16.2551C14.0575 16.6894 13.4799 16.9449 12.8702 16.97ZM11.5302 11.5901V9.96997C11.3688 10.0285 11.2298 10.1363 11.1329 10.2781C11.0361 10.4198 10.9862 10.5884 10.9902 10.76C10.9984 10.93 11.053 11.0945 11.1483 11.2356C11.2435 11.3767 11.3756 11.4889 11.5302 11.5601V11.5901ZM13.7302 14.6599C13.7302 14.1699 13.3902 13.8799 12.8702 13.6599V15.6599C13.1157 15.6254 13.3396 15.5009 13.4985 15.3105C13.6574 15.1202 13.74 14.8776 13.7302 14.6299V14.6599Z"
                                        fill="#15B392"></path>
                                    <path
                                        d="M12.58 3.96997H6C4.93913 3.96997 3.92178 4.39146 3.17163 5.1416C2.42149 5.89175 2 6.9091 2 7.96997V17.97C2 19.0308 2.42149 20.0482 3.17163 20.7983C3.92178 21.5485 4.93913 21.97 6 21.97H18C19.0609 21.97 20.0783 21.5485 20.8284 20.7983C21.5786 20.0482 22 19.0308 22 17.97V11.8999"
                                        stroke="#15B392" stroke-width="1.5" stroke-linecap="round"
                                        stroke-linejoin="round"></path>
                                    <path d="M16.3398 8.57992L21.9998 2.91992" stroke="#15B392" stroke-width="1.5"
                                        stroke-linecap="round" stroke-linejoin="round"></path>
                                    <path d="M17.4805 2.91992H22.0005V7.44992" stroke="#15B392" stroke-width="1.5"
                                        stroke-linecap="round" stroke-linejoin="round"></path>
                                </g>
                            </svg>Valor total facturado:</strong></span>
                    <span
                        style="text-align: right;font-size:17px;">${{ number_format($valorTotalFacturado, 0, ',', '.') }}</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <span><strong><svg class="me-1" width="20px" height="20px" viewBox="-0.5 0 25 25"
                                fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier">
                                    <path
                                        d="M12.8702 16.97V18.0701C12.8702 18.2478 12.7995 18.4181 12.6739 18.5437C12.5482 18.6694 12.3778 18.74 12.2001 18.74C12.0224 18.74 11.852 18.6694 11.7264 18.5437C11.6007 18.4181 11.5302 18.2478 11.5302 18.0701V16.9399C11.0867 16.8668 10.6625 16.7051 10.2828 16.4646C9.90316 16.2241 9.57575 15.9097 9.32013 15.54C9.21763 15.428 9.16061 15.2817 9.16016 15.1299C9.16006 15.0433 9.17753 14.9576 9.21155 14.8779C9.24557 14.7983 9.29545 14.7263 9.35809 14.6665C9.42074 14.6067 9.49484 14.5601 9.57599 14.5298C9.65713 14.4994 9.7436 14.4859 9.83014 14.49C9.91602 14.4895 10.0009 14.5081 10.0787 14.5444C10.1566 14.5807 10.2254 14.6338 10.2802 14.7C10.6 15.1178 11.0342 15.4338 11.5302 15.6099V13.0701C10.2002 12.5401 9.53015 11.77 9.53015 10.76C9.55019 10.2193 9.7627 9.70353 10.1294 9.30566C10.4961 8.9078 10.9929 8.65407 11.5302 8.59009V7.47998C11.5302 7.30229 11.6007 7.13175 11.7264 7.0061C11.852 6.88045 12.0224 6.81006 12.2001 6.81006C12.3778 6.81006 12.5482 6.88045 12.6739 7.0061C12.7995 7.13175 12.8702 7.30229 12.8702 7.47998V8.58008C13.2439 8.63767 13.6021 8.76992 13.9234 8.96924C14.2447 9.16856 14.5226 9.43077 14.7402 9.73999C14.8284 9.85568 14.8805 9.99471 14.8901 10.1399C14.8928 10.2256 14.8783 10.3111 14.8473 10.3911C14.8163 10.4711 14.7696 10.5439 14.7099 10.6055C14.6502 10.667 14.5787 10.7161 14.4998 10.7495C14.4208 10.7829 14.3359 10.8001 14.2501 10.8C14.1607 10.7989 14.0725 10.7787 13.9915 10.7407C13.9104 10.7028 13.8384 10.648 13.7802 10.5801C13.5417 10.2822 13.2274 10.054 12.8702 9.91992V12.1699L13.1202 12.27C14.3902 12.76 15.1802 13.4799 15.1802 14.6299C15.163 15.2399 14.9149 15.8208 14.4862 16.2551C14.0575 16.6894 13.4799 16.9449 12.8702 16.97ZM11.5302 11.5901V9.96997C11.3688 10.0285 11.2298 10.1363 11.1329 10.2781C11.0361 10.4198 10.9862 10.5884 10.9902 10.76C10.9984 10.93 11.053 11.0945 11.1483 11.2356C11.2435 11.3767 11.3756 11.4889 11.5302 11.5601V11.5901ZM13.7302 14.6599C13.7302 14.1699 13.3902 13.8799 12.8702 13.6599V15.6599C13.1157 15.6254 13.3396 15.5009 13.4985 15.3105C13.6574 15.1202 13.74 14.8776 13.7302 14.6299V14.6599Z"
                                        fill="#FE252D"></path>
                                    <path
                                        d="M12.58 3.96997H6C4.93913 3.96997 3.92178 4.39146 3.17163 5.1416C2.42149 5.89175 2 6.9091 2 7.96997V17.97C2 19.0308 2.42149 20.0482 3.17163 20.7983C3.92178 21.5485 4.93913 21.97 6 21.97H18C19.0609 21.97 20.0783 21.5485 20.8284 20.7983C21.5786 20.0482 22 19.0308 22 17.97V11.8999"
                                        stroke="#FE252D" stroke-width="1.5" stroke-linecap="round"
                                        stroke-linejoin="round"></path>
                                    <path d="M21.9998 2.91992L16.3398 8.57992" stroke="#FE252D" stroke-width="1.5"
                                        stroke-linecap="round" stroke-linejoin="round"></path>
                                    <path d="M20.8698 8.5798H16.3398V4.0498" stroke="#FE252D" stroke-width="1.5"
                                        stroke-linecap="round" stroke-linejoin="round"></path>
                                </g>
                            </svg>Valor total sin facturar:</strong></span>
                    <span
                        style="text-align: right;font-size:17px;">${{ number_format($valorTotalSinFacturar, 0, ',', '.') }}</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <span><strong><svg class="me-1" width="20px" height="20px" viewBox="-0.5 0 25 25"
                                fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier">
                                    <path
                                        d="M12.7003 17.1099V18.22C12.7003 18.308 12.6829 18.395 12.6492 18.4763C12.6156 18.5576 12.5662 18.6316 12.504 18.6938C12.4418 18.7561 12.3679 18.8052 12.2867 18.8389C12.2054 18.8725 12.1182 18.8899 12.0302 18.8899C11.9423 18.8899 11.8551 18.8725 11.7738 18.8389C11.6925 18.8052 11.6187 18.7561 11.5565 18.6938C11.4943 18.6316 11.4449 18.5576 11.4113 18.4763C11.3776 18.395 11.3602 18.308 11.3602 18.22V17.0801C10.9165 17.0072 10.4917 16.8468 10.1106 16.6082C9.72943 16.3695 9.39958 16.0573 9.14023 15.6899C9.04577 15.57 8.99311 15.4226 8.99023 15.27C8.99148 15.1842 9.00997 15.0995 9.04459 15.021C9.0792 14.9425 9.12927 14.8718 9.19177 14.813C9.25428 14.7542 9.32794 14.7087 9.40842 14.679C9.4889 14.6492 9.57455 14.6359 9.66025 14.6399C9.74504 14.6401 9.82883 14.6582 9.90631 14.6926C9.98379 14.7271 10.0532 14.7773 10.1102 14.8401C10.4326 15.2576 10.8657 15.5763 11.3602 15.76V13.21C10.0302 12.69 9.36023 11.9099 9.36023 10.8999C9.38027 10.3592 9.5928 9.84343 9.9595 9.44556C10.3262 9.04769 10.8229 8.79397 11.3602 8.72998V7.62988C11.3602 7.5419 11.3776 7.45482 11.4113 7.37354C11.4449 7.29225 11.4943 7.21847 11.5565 7.15625C11.6187 7.09403 11.6925 7.04466 11.7738 7.01099C11.8551 6.97732 11.9423 6.95996 12.0302 6.95996C12.1182 6.95996 12.2054 6.97732 12.2867 7.01099C12.3679 7.04466 12.4418 7.09403 12.504 7.15625C12.5662 7.21847 12.6156 7.29225 12.6492 7.37354C12.6829 7.45482 12.7003 7.5419 12.7003 7.62988V8.71997C13.0724 8.77828 13.4289 8.91103 13.7485 9.11035C14.0681 9.30967 14.3442 9.57137 14.5602 9.87988C14.6555 9.99235 14.7117 10.1329 14.7202 10.28C14.7229 10.3662 14.7084 10.4519 14.6776 10.5325C14.6467 10.613 14.6002 10.6867 14.5406 10.749C14.481 10.8114 14.4096 10.8613 14.3306 10.8958C14.2516 10.9303 14.1665 10.9487 14.0802 10.95C13.99 10.9475 13.9013 10.9257 13.8202 10.886C13.7391 10.8463 13.6675 10.7897 13.6102 10.72C13.3718 10.4221 13.0575 10.1942 12.7003 10.0601V12.3101L12.9503 12.4099C14.2203 12.9099 15.0103 13.63 15.0103 14.77C14.9954 15.3808 14.7481 15.9629 14.3189 16.3977C13.8897 16.8325 13.3108 17.0871 12.7003 17.1099ZM11.3602 11.73V10.0999C11.1988 10.1584 11.0599 10.2662 10.963 10.408C10.8662 10.5497 10.8162 10.7183 10.8203 10.8899C10.8173 11.0676 10.8669 11.2424 10.963 11.3918C11.0591 11.5413 11.1973 11.6589 11.3602 11.73ZM13.5502 14.8C13.5502 14.32 13.2203 14.03 12.7003 13.8V15.8C12.9387 15.7639 13.1561 15.6427 13.3123 15.459C13.4685 15.2752 13.553 15.0412 13.5502 14.8Z"
                                        fill="#344CB7"></path>
                                    <path
                                        d="M18 3.96997H6C4.93913 3.96997 3.92172 4.39146 3.17157 5.1416C2.42142 5.89175 2 6.9091 2 7.96997V17.97C2 19.0308 2.42142 20.0482 3.17157 20.7983C3.92172 21.5485 4.93913 21.97 6 21.97H18C19.0609 21.97 20.0783 21.5485 20.8284 20.7983C21.5786 20.0482 22 19.0308 22 17.97V7.96997C22 6.9091 21.5786 5.89175 20.8284 5.1416C20.0783 4.39146 19.0609 3.96997 18 3.96997Z"
                                        stroke="#344CB7" stroke-width="1.5" stroke-linecap="round"
                                        stroke-linejoin="round"></path>
                                </g>
                            </svg>Valor total:</strong></span>
                    <span
                        style="text-align: right;font-weight:bold;font-size:18px;">${{ number_format($valorTotal, 0, ',', '.') }}</span>
                </li>
            </ul>
        </div>
        <div class="d-flex">
            <form class="d-flex" method="GET" action="{{ route('gle.index') }}">
                <div class="input-group mb-0 d-flex justify-content-between">
                    <button class="btn btn-secondary" type="button" id="button-addon1"><i
                            class="fas fa-search"></i></button>
                    <input type="text" name="lafactura" class="form-control me-2"
                        placeholder="Buscar cliente o factura..." value="{{ request('lafactura') }}">
                </div>
            </form>
            <form class="d-flex" action="{{ route('gle.export-facturas') }}" method="GET" class="form-inline">
                <select name="añio" class="form-control" style="width: 70px;" required>
                    <option value="">Año</option>
                    @foreach ($añios as $añio)
                        <option value="{{ $añio }}">{{ $añio }}</option>
                    @endforeach
                </select>

                <select name="meis" class="form-control" style="width: 70px;" required>
                    <option value="">Mes</option>
                    @foreach ($meises as $meis)
                        <option value="{{ $meis }}">{{ $meis }}</option>
                    @endforeach
                </select>
                <button type="submit" class="btn btn-secondary">
                    <svg class="me-2" width="18px" height="18px" viewBox="0 0 32 32"
                            xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                            fill="#000000">
                            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                            <g id="SVGRepo_iconCarrier">
                                <defs>
                                    <linearGradient id="a" x1="4.494" y1="-2092.086" x2="13.832"
                                        y2="-2075.914" gradientTransform="translate(0 2100)"
                                        gradientUnits="userSpaceOnUse">
                                        <stop offset="0" stop-color="#18884f"></stop>
                                        <stop offset="0.5" stop-color="#117e43"></stop>
                                        <stop offset="1" stop-color="#0b6631"></stop>
                                    </linearGradient>
                                </defs>
                                <title>file_type_excel</title>
                                <path
                                    d="M19.581,15.35,8.512,13.4V27.809A1.192,1.192,0,0,0,9.705,29h19.1A1.192,1.192,0,0,0,30,27.809h0V22.5Z"
                                    style="fill:#185c37"></path>
                                <path
                                    d="M19.581,3H9.705A1.192,1.192,0,0,0,8.512,4.191h0V9.5L19.581,16l5.861,1.95L30,16V9.5Z"
                                    style="fill:#21a366"></path>
                                <path d="M8.512,9.5H19.581V16H8.512Z" style="fill:#107c41"></path>
                                <path
                                    d="M16.434,8.2H8.512V24.45h7.922a1.2,1.2,0,0,0,1.194-1.191V9.391A1.2,1.2,0,0,0,16.434,8.2Z"
                                    style="opacity:0.10000000149011612;isolation:isolate"></path>
                                <path
                                    d="M15.783,8.85H8.512V25.1h7.271a1.2,1.2,0,0,0,1.194-1.191V10.041A1.2,1.2,0,0,0,15.783,8.85Z"
                                    style="opacity:0.20000000298023224;isolation:isolate"></path>
                                <path
                                    d="M15.783,8.85H8.512V23.8h7.271a1.2,1.2,0,0,0,1.194-1.191V10.041A1.2,1.2,0,0,0,15.783,8.85Z"
                                    style="opacity:0.20000000298023224;isolation:isolate"></path>
                                <path
                                    d="M15.132,8.85H8.512V23.8h6.62a1.2,1.2,0,0,0,1.194-1.191V10.041A1.2,1.2,0,0,0,15.132,8.85Z"
                                    style="opacity:0.20000000298023224;isolation:isolate"></path>
                                <path
                                    d="M3.194,8.85H15.132a1.193,1.193,0,0,1,1.194,1.191V21.959a1.193,1.193,0,0,1-1.194,1.191H3.194A1.192,1.192,0,0,1,2,21.959V10.041A1.192,1.192,0,0,1,3.194,8.85Z"
                                    style="fill:url(#a)"></path>
                                <path
                                    d="M5.7,19.873l2.511-3.884-2.3-3.862H7.758L9.013,14.6c.116.234.2.408.238.524h.017c.082-.188.169-.369.26-.546l1.342-2.447h1.7l-2.359,3.84,2.419,3.905H10.821l-1.45-2.711A2.355,2.355,0,0,1,9.2,16.8H9.176a1.688,1.688,0,0,1-.168.351L7.515,19.873Z"
                                    style="fill:#fff"></path>
                                <path d="M28.806,3H19.581V9.5H30V4.191A1.192,1.192,0,0,0,28.806,3Z"
                                    style="fill:#33c481"></path>
                                <path d="M19.581,16H30v6.5H19.581Z" style="fill:#107c41"></path>
                            </g>
                        </svg>                        
                </button>
            </form>
        </div>
        <div>
            <table class="table table-striped mb-0">
                <thead style="font-size: 10px;background-color:#FE252D">
                    <tr>
                        <th style="color: #FFF;border: 1px solid #FFF;">FACTURA</th>
                        <th style="color: #FFF;border: 1px solid #FFF;">AÑO/MES</th>
                        <th style="color: #FFF;border: 1px solid #FFF;">CLIENTE</th>
                        <th style="color: #FFF;border: 1px solid #FFF;">TOTAL GLE</th>
                        <th style="color: #FFF;border: 1px solid #FFF;">TOTAL SIIGO</th>
                        <th style="color: #FFF;border: 1px solid #FFF;">DIF</th>
                    </tr>
                </thead>
                <tbody style="font-size: 11px;font-family: Titillium Web;">
                    @foreach ($facturas as $factura)
                        <tr>
                            <td style="border: 1px solid #9FAACC;text-align:center;">{{ $factura->factura }}</td>
                            <td style="border: 1px solid #9FAACC;text-align:center;">
                                {{ $factura->año }}/{{ $factura->mes }}</td>
                            <td style="border: 1px solid #9FAACC;text-align:center;font-size:8px;">
                                {{ $factura->cliente }}</td>
                            <td style="border: 1px solid #9FAACC;text-align:center;">
                                ${{ number_format($factura->total_gle, 0, ',', '.') }}</td>
                            <td style="border: 1px solid #9FAACC;text-align:center;">
                                ${{ number_format($factura->total_siigo, 0, ',', '.') }}</td>
                            <td style="border: 1px solid #9FAACC;text-align:center;">
                                ${{ number_format($factura->diferencia, 0, ',', '.') }}</td>
                        </tr>
                    @endforeach
                </tbody>
            </table>
            <div class="d-flex justify-content-end pt-2">
                {{ $facturas->links('pagination::bootstrap-5') }}
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    $(document).ready(function() {
        // Manejar la búsqueda por guía
        $('#searchGuia').on('input', function() {
            const guia = $(this).val(); // Solo usa el término de búsqueda

            $.ajax({
                url: '{{ route('gle.buscarPorGuia') }}',
                method: 'GET',
                data: {
                    guia: guia // Sin year ni month
                },
                success: function(response) {
                    $('#table-container').html(response.html);
                },
                error: function() {
                    alert('Ocurrió un error al realizar la búsqueda.');
                }
            });
        });
    });
</script>
<script>
    $(document).ready(function() {
        // Botón para descargar Excel
        $('#exportExcel').click(function() {
            const year = $('#year').val();
            const month = $('#month').val();
            const operador = $('#operador').val();
            const clientes = $('#cliente').val(); // Array de clientes seleccionados
            const factura = $('#factura').val();
            const guia = $('#searchGuia').val();

            // Construir la URL con los filtros actuales
            let url = `/gle/export-to-excel?year=${year}&month=${month}`;
            if (operador) url += `&operador=${operador}`;
            if (clientes && clientes.length > 0) url += `&cliente[]=${clientes.join('&cliente[]=')}`;
            if (factura) url += `&factura=${factura}`;
            if (guia) url += `&guia=${guia}`;

            // Redirigir a la URL de descarga
            window.location.href = url;
        });
    });
</script>
<script>
    $(document).ready(function() {
        // Función para actualizar la página con los filtros seleccionados
        function reloadPage() {
            const year = $('#year').val();
            const month = $('#month').val();
            const operador = $('#operador').val();
            const clientes = $('#cliente').val(); // Array de clientes seleccionados
            const factura = $('#factura').val(); // Nuevo filtro de factura

            // Construir la URL con los filtros seleccionados
            let url = `?year=${year}&month=${month}`;
            if (operador) url += `&operador=${operador}`;
            if (clientes && clientes.length > 0) url += `&cliente[]=${clientes.join('&cliente[]=')}`;
            if (factura) url += `&factura=${factura}`;

            // Redirigir a la nueva URL
            window.location.href = url;
        }

        // Evento al cambiar cualquier filtro
        $('#year, #month, #operador, #cliente, #factura').change(reloadPage);

        // Botón para limpiar filtros
        $('#clearFilters').click(function() {
            window.location.href = `?year={{ $defaultYear }}&month={{ $defaultMonth }}`;
        });
    });
</script>
<!-- Mensajes de SweetAlert -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        @if (session('success'))
            Swal.fire({
                icon: 'success',
                title: '¡Éxito!',
                text: '{{ session('success') }}',
                confirmButtonText: 'Aceptar'
            });
        @endif

        @if (session('error'))
            Swal.fire({
                icon: 'error',
                title: '¡Error!',
                text: '{{ session('error') }}',
                confirmButtonText: 'Aceptar'
            });
        @endif
    });
</script>
@if (session('success'))
    <div class="alert alert-success">
        {{ session('success') }}
    </div>
@endif

@if (session('error'))
    <div class="alert alert-danger">
        {{ session('error') }}
    </div>
@endif
<x-footer />
